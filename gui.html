<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
    <link rel="stylesheet" href="css/gui.css">
  
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/css/bootstrap-select.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.5.0/jszip.min.js" integrity="sha512-y3o0Z5TJF1UsKjs/jS2CDkeHN538bWsftxO9nctODL5W40nyXIbs0Pgyu7//icrQY9m6475gLaVr39i/uh/nLA==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.0/FileSaver.min.js" integrity="sha512-csNcFYJniKjJxRWRV1R7fvnXrycHP6qDR21mgz1ZP55xY5d+aHLfo9/FcGDQLfn2IfngbAHd8LdfsagcCqgTcQ==" crossorigin="anonymous"></script>
  
    <title>Itchs | Click-GUI Generator</title>

    <style>
      .nav_override {
        background-color: #282c2f !important;
      }
    </style>
  </head>
  <body>
    <nav class="nav_override sticky-top navbar navbar-expand-lg navbar-dark bg-dark">
      <a class="navbar-brand" href="index.html">Itchs' Creations</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
        <div class="navbar-nav">
          <a class="nav-item nav-link active" href="index.html">Home <span class="sr-only">(current)</span></a>
        </div>
      </div>
    </nav>
    <div class="container">

      <br>

      <div class="jumbotron popout_bg text-light">
        <h1 class="display-4">Click-GUI Generator</h1>
          <p class="lead">Generates a data-pack which has Click GUIs in it! Created by Itchs#7216.<br> If you have any issues, feel free to contact me on Discord. My DMs are open! :) Currently only works for 1.16, Not 1.17.</p>
          <pre class="bg-dark text-light p-2 mb-5"><code>execute as &lt;summoner&gt; at @s run function itchs_gui:summon</code></pre>
      </div>

    </div>
    <br>
    <br>
    <br>
    <center>
    <div class="wrapper">
      <form class="form">
        <h2>Objectives & Tags</h1>
        <br>
        <label id="scoreboardObj">
          <input type="text" name="scoreboardObj" placeholder="Scoreboard Obj" required class="form_box"/> 
        </label>
        <br>
        <label id="minecart_tag">
          <input type="text" name="minecart_tag" placeholder="Minecart Tag, e.g. GUI" required class="form_box"/> 
        </label>
        <br>
        <label id="namespace">
          <input type="text" name="namespace" placeholder="Namespace e.g. gui" required class="form_box"/>
        </label>
        <br>  
        <br>
        <br>
        <h2 style="margin-left:4em;">GUI Slots</h2>
        <p style="font-size:15px;">Put in whatever you want to be put in a specific slot. e.g. <br><div class="code_block" style="text-align: left;"><code>bone{Enchantments:[{id:"unbreakng",lvl:1}],HideFlags:31,display:[Name:'[{"text":"Colorful Bone!","color":"yellow"}]'],gui:1b}</code></div><br>Make sure to put a {gui:1b} in there somewhere or it wont work! </p>
        <br>
        <label id="slot1">
          <input type="text" name="slot1" placeholder="Slot One" required class="form_box_slot"/> 
        </label>
        <br>
        <label id="slot2">
          <input type="text" name="slot2" placeholder="Slot Two"  class="form_box_slot"/> 
        </label>
        <br>
        <label id="slot3">
          <input type="text" name="slot3" placeholder="Slot Three"  class="form_box_slot"/> 
        </label>
        <br>
        <label id="slot4">
          <input type="text" name="slot4" placeholder="Slot Four"  class="form_box_slot"/> 
        </label>
        <br>
        <label id="slot5">
          <input type="text" name="slot5" placeholder="Slot Five"  class="form_box_slot"/> 
        </label>
        <br>
        <label id="slot6">
          <input type="text" name="slot6" placeholder="Slot Six"  class="form_box_slot"/> 
        </label>
        <br>
        <label id="slot7">
          <input type="text" name="slot7" placeholder="Slot Seven"  class="form_box_slot"/> 
        </label>
        <br>
        <label id="slot8">
          <input type="text" name="slot8" placeholder="Slot Eight"  class="form_box_slot"/> 
        </label>
        <br>
        <label id="slot9">
          <input type="text" name="slot9" placeholder="Slot Nine"  class="form_box_slot"/> 
        </label>
        <br>
        <label id="slot10">
          <input type="text" name="slot10" placeholder="Slot Ten"  class="form_box_slot"/> 
        </label>
        <br>
        <label id="slot11">
          <input type="text" name="slot11" placeholder="Slot Eleven"  class="form_box_slot"/> 
        </label>
        <br>
        <label id="slot12">
          <input type="text" name="slot12" placeholder="Slot Twelve"  class="form_box_slot"/> 
        </label>
        <br>
        <label id="slot13">
          <input type="text" name="slot13" placeholder="Slot Thirteen"  class="form_box_slot"/> 
        </label>
        <br>
        <label id="slot14">
          <input type="text" name="slot14" placeholder="Slot Fourteen"  class="form_box_slot"/> 
        </label>
        <br>
        <label id="slot15">
          <input type="text" name="slot15" placeholder="Slot Fifteen"  class="form_box_slot"/> 
        </label>
        <br>
        <label id="slot16">
          <input type="text" name="slot16" placeholder="Slot Sixteen"  class="form_box_slot"/> 
        </label>
        <br>
        <label id="slot17">
          <input type="text" name="slot17" placeholder="Slot Seventeen"  class="form_box_slot"/> 
        </label>
        <br>
        <label id="slot18">
          <input type="text" name="slot18" placeholder="Slot Eighteen"  class="form_box_slot"/> 
        </label>
        <br>
        <label id="slot19">
          <input type="text" name="slot19" placeholder="Slot Nineteen"  class="form_box_slot"/> 
        </label>
        <br>
        <label id="slot20">
          <input type="text" name="slot20" placeholder="Slot Twenty"  class="form_box_slot"/> 
        </label>
        <br>
        <label id="slot21">
          <input type="text" name="slot21" placeholder="Slot Twenty-One"  class="form_box_slot"/> 
        </label>
        <br>
        <label id="slot22">
          <input type="text" name="slot22" placeholder="Slot Twenty-Two"  class="form_box_slot"/> 
        </label>
        <br>
        <label id="slot23">
          <input type="text" name="slot23" placeholder="Slot Twenty-Three"  class="form_box_slot"/> 
        </label>
        <br>
        <label id="slot24">
          <input type="text" name="slot24" placeholder="Slot Twenty-Four"  class="form_box_slot"/> 
        </label>
        <br>
        <label id="slot25">
          <input type="text" name="slot25" placeholder="Slot Twenty-Five"  class="form_box_slot"/> 
        </label>
        <br>
        <label id="slot26">
          <input type="text" name="slot26" placeholder="Slot Twenty-Six"  class="form_box_slot"/> 
        </label>
        <br>
        <label id="slot27">
          <input type="text" name="slot27" placeholder="Slot Twenty-Seven"  class="form_box_slot"/> 
        </label>
        <br>
        <label id="submit">
          <input type="submit" value="Generate data pack" class="btn btn-success btn-block btn-lg my-4 generate_btn_datapack">
        </label>
        <a download="pack.zip" href="downloads/pack.zip"><button type="button" class="btn btn-success btn-block btn-lg my-4" onclick="getContactInfo()">Download Resource Pack</button></a>
      </form>
    </div>
  </center>
    <script>
      
      // Detect when Submit button pressed
      const wrapper = document.querySelector('.wrapper'),
        form = wrapper.querySelectorAll('.form'),
        submitInput = form[0].querySelector('input[type="submit"]');
      
      

      // Download data pack function
      function download(e){

        e.preventDefault()

        // Init formData
        var formData = new FormData(form[0]);

        // Call vars From Form
        scoreboardObj = formData.get('scoreboardObj');
        minecart_tag = formData.get('minecart_tag');
        namespace = formData.get('namespace');
        slot1 = formData.get('slot1');
        slot2 = formData.get('slot2');
        slot3 = formData.get('slot3');
        slot4 = formData.get('slot4');
        slot5 = formData.get('slot5');
        slot6 = formData.get('slot6');
        slot7 = formData.get('slot7');
        slot8 = formData.get('slot8');
        slot9 = formData.get('slot9');
        slot10 = formData.get('slot10');
        slot11 = formData.get('slot11');
        slot12 = formData.get('slot12');
        slot13 = formData.get('slot13');
        slot14 = formData.get('slot14');
        slot15 = formData.get('slot15');
        slot16 = formData.get('slot16');
        slot17 = formData.get('slot17');
        slot18 = formData.get('slot18');
        slot19 = formData.get('slot19');
        slot20 = formData.get('slot20');
        slot21 = formData.get('slot21');
        slot22 = formData.get('slot22');
        slot23 = formData.get('slot23');
        slot24 = formData.get('slot24');
        slot25 = formData.get('slot25');
        slot26 = formData.get('slot26');
        slot27 = formData.get('slot27');


        // Init zip var to allow creation of files/folders
        var zip = new JSZip();


        // Pack mcmeta & data folder
        zip.file("pack.mcmeta", '{ "pack": {"pack_format": 6,"description": "Chest GUI Data Pack"}}');
        var data = zip.folder("data");

        // Minecraft folder & contents
        var mc_func = data.folder("minecraft").folder("tags").folder("functions");
        mc_func.file(`tick.json",'{"replace":false,"values":["${namespace}:tick"]}`);
        mc_func.file(`load.json",'{"replace":false,"values":["${namespace}:load"]}`);
        
        // Namespace Folder
        var namespace = data.folder(`${namespace}`).folder("functions");
        
        // Tick function
        namespace.file("tick.mcfunction",`execute as @e[tag=chestGUI] at @s run tp @s @e[tag=armor_stand_GUI,sort=nearest,limit=1]\nexecute store result score gui.slot1 GUI run clear @a ${slot1} 0\nexecute store result score gui.slot2 GUI run clear @a ${slot2} 0\nexecute store result score gui.slot3 GUI run clear @a ${slot3} 0\nexecute store result score gui.slot4 GUI run clear @a ${slot4} 0\nexecute store result score gui.slot5 GUI run clear @a ${slot5} 0\nexecute store result score gui.slot6 GUI run clear @a ${slot6} 0\nexecute store result score gui.slot7 GUI run clear @a ${slot7} 0\nexecute store result score gui.slot8 GUI run clear @a ${slot8} 0\nexecute store result score gui.slot9 GUI run clear @a ${slot9} 0\nexecute store result score gui.slot10 GUI run clear @a ${slot10} 0\nexecute store result score gui.slot11 GUI run clear @a ${slot11} 0\nexecute store result score gui.slot12 GUI run clear @a ${slot12} 0\nexecute store result score gui.slot13 GUI run clear @a ${slot13} 0\nexecute store result score gui.slot14 GUI run clear @a ${slot14} 0\nexecute store result score gui.slot15 GUI run clear @a ${slot15} 0\nexecute store result score gui.slot16 GUI run clear @a ${slot16} 0\nexecute store result score gui.slot17 GUI run clear @a ${slot17} 0\nexecute store result score gui.slot18 GUI run clear @a ${slot18} 0\nexecute store result score gui.slot19 GUI run clear @a ${slot19} 0\nexecute store result score gui.slot20 GUI run clear @a ${slot20} 0\nexecute store result score gui.slot21 GUI run clear @a ${slot21} 0\nexecute store result score gui.slot22 GUI run clear @a ${slot22} 0\nexecute store result score gui.slot23 GUI run clear @a ${slot23} 0\nexecute store result score gui.slot24 GUI run clear @a ${slot24} 0\nexecute store result score gui.slot25 GUI run clear @a ${slot25} 0\nexecute store result score gui.slot26 GUI run clear @a ${slot26} 0\nexecute store result score gui.slot27 GUI run clear @a ${slot27} 0\n\nexecute if score gui.slot1 GUI >= GUIMarker GUI run function gui:slots/slot1\nexecute if score gui.slot2 GUI >= GUIMarker GUI run function gui:slots/slot2\nexecute if score gui.slot3 GUI >= GUIMarker GUI run function gui:slots/slot3\nexecute if score gui.slot4 GUI >= GUIMarker GUI run function gui:slots/slot4\nexecute if score gui.slot5 GUI >= GUIMarker GUI run function gui:slots/slot5\nexecute if score gui.slot6 GUI >= GUIMarker GUI run function gui:slots/slot6\nexecute if score gui.slot7 GUI >= GUIMarker GUI run function gui:slots/slot7\nexecute if score gui.slot8 GUI >= GUIMarker GUI run function gui:slots/slot8\nexecute if score gui.slot9 GUI >= GUIMarker GUI run function gui:slots/slot9\nexecute if score gui.slot10 GUI >= GUIMarker GUI run function gui:slots/slot10\nexecute if score gui.slot11 GUI >= GUIMarker GUI run function gui:slots/slot11\nexecute if score gui.slot12 GUI >= GUIMarker GUI run function gui:slots/slot12\nexecute if score gui.slot13 GUI >= GUIMarker GUI run function gui:slots/slot13\nexecute if score gui.slot14 GUI >= GUIMarker GUI run function gui:slots/slot14\nexecute if score gui.slot15 GUI >= GUIMarker GUI run function gui:slots/slot15\nexecute if score gui.slot16 GUI >= GUIMarker GUI run function gui:slots/slot16\nexecute if score gui.slot17 GUI >= GUIMarker GUI run function gui:slots/slot17\nexecute if score gui.slot18 GUI >= GUIMarker GUI run function gui:slots/slot18\nexecute if score gui.slot19 GUI >= GUIMarker GUI run function gui:slots/slot19\nexecute if score gui.slot20 GUI >= GUIMarker GUI run function gui:slots/slot20\nexecute if score gui.slot21 GUI >= GUIMarker GUI run function gui:slots/slot21\nexecute if score gui.slot22 GUI >= GUIMarker GUI run function gui:slots/slot22\nexecute if score gui.slot23 GUI >= GUIMarker GUI run function gui:slots/slot23\nexecute if score gui.slot24 GUI >= GUIMarker GUI run function gui:slots/slot24\nexecute if score gui.slot25 GUI >= GUIMarker GUI run function gui:slots/slot25\nexecute if score gui.slot26 GUI >= GUIMarker GUI run function gui:slots/slot26\nexecute if score gui.slot27 GUI >= GUIMarker GUI run function gui:slots/slot27\n`)

        // Load function
        namespace.file("load.mcfunction",`scoreboard objectives add ${scoreboardObj} dummy\nscoreboard players set GUIMarker ${scoreboardObj} 1`)

        zip.generateAsync({type:"blob"}).then(function(content){saveAs(content, "itchs_chestgui.zip")});}

      document.addEventListener('DOMContentLoaded', function(){submitInput.addEventListener('click', download, false)},false);    

      // Alert - use to debug
      // alert('Objectives & Tags: ' + formData.get('scoreboardObj') + ' - '+ formData.get('minecart_tag') + ' Slots: ' + formData.get('slot1') + ' - ' + formData.get('slot2') + ' - ' + formData.get('slot3') + ' - ' + formData.get('slot4') + ' - ' + formData.get('slot5') + ' - ' + formData.get('slot6') + ' - ' + formData.get('slot7') + ' - ' + formData.get('slot8') + ' - ' + formData.get('slot9') + ' - ' + formData.get('slot10') + ' - ' + formData.get('slot11') + ' - ' + formData.get('slot12') + ' - ' + formData.get('slot13') + ' - ' + formData.get('slot14') + ' - ' + formData.get('slot15') + ' - ' + formData.get('slot16') + ' - ' + formData.get('slot17') + ' - ' + formData.get('slot18') + ' - ' + formData.get('slot19') + ' - ' + formData.get('slot20') + ' - ' + formData.get('slot21') + ' - ' + formData.get('slot22') + ' - ' + formData.get('slot23') + ' - ' + formData.get('slot24') + ' - ' + formData.get('slot25') + ' - ' + formData.get('slot2') + ' - ' + formData.get('slot2') + ' - ' + formData.get('slot2') + ' - ' + formData.get('slot2') + ' - ' + formData.get('slot26') + ' - ' + formData.get('slot27'));

      // Add file / folders with vars: 

    </script>
  </body>
</html>